<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="./css/output.css" rel="stylesheet">
    <script src="https://secure.wayforpay.com/server/pay-widget.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

</head>
<body class="bg-main-color">

    <div id="composition" class="flex items-center justify-center fixed hidden size-full text-black" style="background-color: rgba(0, 0, 0, .8);z-index: 1;">
        <div class="p-6 m-12 w-auto bg-main-color rounded-3xl">
            <h2 class="text-2xl font-bold mb-4 text-center">–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—ñ—Ü—É</h2>
            
        </div>
    </div> 


    <header id="header" class="bg-header-color text-white flex items-center justify-between px-8 h-24 w-full fixed z-50">

        <div class="text-4xl font-bold font-[Merriweather]">PIZZATIME</div>

        <nav class="flex space-x-8 font-semibold text-2xl">
          <a href="#" class="px-4">–ú–µ–Ω—é</a>
          <a href="#" class="px-4">–ü—Ä–æ –Ω–∞—Å</a>
          <a href="#" class="px-4">–ê–∫—Ü—ñ—ó</a>
          <a href="#" class="px-4">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
        </nav>
        
        <div class="w-16 h-16  rounded-full flex items-center justify-center">            
            
        </div>

    </header>
    
    <section class="w-full h-[400px] bg-cover bg-center" style="background-image: url('./css/img/bg.png');">

    </section>

        <main class="mx-auto py-10 bg-main-color size-full flex gap-10 relative">
    
            <!-- –õ–æ–≥–æ—Ç–∏–ø -->
            <div class="w-1/4 flex flex-col items-center">
            <!-- –õ–æ–≥–æ -->
            </div>
        
            <!-- –°–µ—Ç–∫–∞ –ø–∏—Ü—Ü -->
            <div id="meny-grid">
                <div id="pizza-grid" class="grid grid-cols-4 gap-6 flex-1 mb-6">

                </div>
                <h2 class="text-dark text-4xl font-bold text-center font-[Merriweather]"> –ù–∞–ø–æ—ó </h2>
                <div id="drink-grid" class="grid grid-cols-4 gap-6 flex-1">

                </div>
            </div>
        
            <!-- –û–±–µ—Ä—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã —Å sticky -->
            <div class="w-64">
                <div class="sticky top-1/2 -translate-y-1/2 bg-basket-color p-4 mr-8 my-24 rounded shadow-md">
                    <ul class="mb-2">
                    <!-- –¢–æ–≤–∞—Ä—ã -->
                    </ul>
                    <div class="font-semibold mb-2">
                    <!-- –°—É–º–º–∞ -->
                    </div>
                    <div class="flex gap-2">
                        <button id="clear-basket" class="bg-[#A4763A] px-3 py-1 rounded">–û—á–∏—Å—Ç–∏—Ç–∏</button>
                        <button id="pay-button" onclick="pay()" class="bg-red-600 text-white px-3 py-1 rounded">–û–ø–ª–∞—Ç–∞</button>
                    </div>
                </div>
            </div>
        </main>

        <div class="bg-header-color mx-6 mb-6 rounded-3xl p-6 text-main-color relative overflow-hidden" style="font-size: 24px;">
            <div class="grid grid-cols-4 gap-2  relative">

                <div class="relative ">
                    <h1 class="font-black text-5xl md:text-6xl mb-6">–ü–†–û –ù–ê–°</h1>
                </div>
                
                <div class="col-span-3">
                    <p class="text-base mb-4">
                        –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ <strong>PIZZATIME!</strong><br>
                        –ú–∏ ‚Äî –∫–æ–º–∞–Ω–¥–∞ —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö —à–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫—ñ–≤ —ñ—Ç–∞–ª—ñ–π—Å—å–∫–æ—ó –∫—É—Ö–Ω—ñ. –í–∂–µ –ø–æ–Ω–∞–¥ 5 —Ä–æ–∫—ñ–≤ –º–∏ –≥–æ—Ç—É—î–º–æ –ø—ñ—Ü—É –∑–∞ –∫–ª–∞—Å–∏—á–Ω–∏–º–∏ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ç—ñ–ª—å–∫–∏ –Ω–∞–π–∫—Ä–∞—â—ñ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏.
                    </p>
                </div>
               

                <div class="col-span-2">
                    <p class="text-lg mb-4">
                    –ù–∞—à–∞ –º—ñ—Å—ñ—è ‚Äî –¥–∞—Ä—É–≤–∞—Ç–∏ —Ä–∞–¥—ñ—Å—Ç—å —Ç–∞ —Ç–µ–ø–ª–æ –∫–æ–∂–Ω–æ–º—É –≥–æ—Å—Ç—é. –£ –Ω–∞—Å –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ –ø—ñ—Ü—É –Ω–∞ –±—É–¥—å-—è–∫–∏–π —Å–º–∞–∫: –≤—ñ–¥ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–æ—ó ¬´–ú–∞—Ä–≥–∞—Ä–∏—Ç–∏¬ª –¥–æ –∞–≤—Ç–æ—Ä—Å—å–∫–∏—Ö –≤–∞—Ä—ñ–∞—Ü—ñ–π –≤—ñ–¥ –Ω–∞—à–∏—Ö —à–µ—Ñ-–∫—É—Ö–∞—Ä—ñ–≤.
                    </p>
            
                    <p class="text-lg font-semibold mb-2">–ß–æ–º—É –æ–±–∏—Ä–∞—é—Ç—å –Ω–∞—Å?</p>
                    
                    <ul class="list-disc list-inside text-lg mb-4">
                        <li>–°–≤—ñ–∂—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ —â–æ–¥–Ω—è</li>
                        <li>–†–µ—Ü–µ–ø—Ç–∏ –±–µ–∑ –∫–æ–Ω—Å–µ—Ä–≤–∞–Ω—Ç—ñ–≤</li>
                        <li>–®–≤–∏–¥–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∞</li>
                        <li>–¢—É—Ä–±–æ—Ç–∞ –ø—Ä–æ –∫–æ–∂–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞</li>
                    </ul>
            
                    <p class="text-lg">
                    –ü—Ä–∏—Ö–æ–¥—å—Ç–µ –¥–æ –Ω–∞—Å —ñ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —Å–∞–º—ñ ‚Äî –ª—é–±–æ–≤ –¥–æ –ø—ñ—Ü–∏ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ –ø–µ—Ä—à–æ–≥–æ —à–º–∞—Ç–æ—á–∫–∞!
                    </p>
                </div>
            
                <div class="flex justify-center items-center col-span-2 bottom-4 right-4">
                    <img src="./css/img/worker.png" alt="–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞" class="w-[500px] rounded-xl shadow-lg">
                </div>
            </div>
        </div>

        <footer class="bg-header-color text-main-color py-6 px-8 text-sm">
            <div class="flex justify-between ml-26">
                <div>
                    <h4 class="font-black text-4xl py-2">–î–æ—Å—Ç–∞–≤–∫–∞</h4>
                    <p class="py-1 text-xl"> –ö–æ–Ω—Ç–∞–∫—Ç–∏ </p>
                    <p class="py-1 text-xl">  –ú–µ–Ω—é </p>
                    <p class="py-1 text-xl"> –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: <br>08:00 - 23:00 </p>
                </div>
                <div>
                    <h4 class="font-black text-4xl py-2">–ö–æ–Ω—Ç–∞–∫—Ç–∏</h4>
                    <p class="py-1 text-xl">–º. –î–Ω—ñ–ø—Ä–æ, –≤—É–ª. –®–µ–≤—á–µ–Ω–∫–∞ 1</p>
                    <p class="py-1 text-xl">+38 (067) 123-45-67</p>
                    <p class="py-3 text-xl">info@pizzatime.ua</p>
                </div>
                <div>
                    <h4 class="font-black text-4xl py-2">–ú–∏ –≤ —Å–æ—Ü–º–µ—Ä–µ–∂–∞—Ö</h4>
                    <div class="flex space-x-2 mt-2">
                        <img src="./css/img/facebook.png" alt="fb" class="w-18 h-18 mx-3">
                        <img src="./css/img/instagram.png" alt="inst" class="w-18 h-18 mx-3">
                        <img src="./css/img/telegram.png" alt="tt" class="w-18 h-18 mx-3">
                    </div>

                    <p class="py-1 text-xl mt-2">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</p>
                    <p class="py-1 text-xl">–£–≥–æ–¥–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</p>
                </div>
                <div class="relative w-1/8">
                    <button class="absolute top-0 right-0 bg-main-color text-header-color px-16 py-4 font-black text-4xl rounded-4xl">–í–≥–æ—Ä—É</button>
                    <p class="absolute bottom-0 right-0 m-2 text-xl">¬© 2025 PIZZATIME. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ</p>
                </div>
            </div>
        </footer>

        <script>
                        function showMenu(){
                fetch('PHP/get_pizza.php')
                .then(response => response.json())
                .then(data => {
                    const pizzaGrid = document.getElementById('pizza-grid');
                    pizzaGrid.innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞

                    data.forEach(pizza => {
                        const pizzaCard = document.createElement('div');
                        pizzaCard.className = 'bg-main-color rounded-xl p-4 w-[220px] h-auto flex flex-col items-center text-center hover:shadow-lg hover:bg-main2-color';
                        // –ó–∞–≥–ª—É—à–∫–∞
                        const placeholder = './css/img/pizza.png';

                        pizzaCard.innerHTML = `
                            <h3 class="text-xl font-bold mb-2 font-[Merriweather]">${pizza.NamePizza}</h3>
                            <img src="${pizza.image || placeholder}" alt="${pizza.NamePizza}" class="w-38 h-38 object-cover mb-4">
                            <p class="text-lg font-semibold mb-4 font-[Merriweather]">${pizza.Price} ‚Ç¥</p>
                            <button class="bg-buton-color text-white px-4 py-2 rounded hover:bg-red-700">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫—É</button>
                        `;

                        pizzaCard.onclick = () => {
                            document.getElementById('composition').classList.remove('hidden');
                            loadPizza(pizza.IDPizza); 
                        }

                        pizzaGrid.appendChild(pizzaCard);
                    });
                })
                .catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é:', error));

                fetch('PHP/get_drink.php')
                .then(response => response.json())
                .then(data => {
                    const pizzaGrid = document.getElementById('drink-grid');

                    data.forEach(drink => {
                        const pizzaCard = document.createElement('div');
                        pizzaCard.className = 'bg-main-color rounded-xl p-4 w-[220px] h-auto flex flex-col items-center text-center hover:shadow-lg hover:bg-main2-color';
                        // –ó–∞–≥–ª—É—à–∫–∞
                        const placeholder = './css/img/pizza.png';

                        pizzaCard.innerHTML = `
                            <h3 class="text-xl font-bold mb-2 font-[Merriweather]">${drink.NameDish}</h3>
                            <img src="${drink.image || placeholder}" alt="${drink.NameDish}" class="w-38 h-38 object-cover mb-4">
                            <p class="text-lg font-semibold mb-4 font-[Merriweather]">${drink.Price} ‚Ç¥</p>
                            <button class="bg-buton-color text-white px-4 py-2 rounded hover:bg-red-700">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫—É</button>
                        `;

                        pizzaGrid.appendChild(pizzaCard);
                    });
                })
            }

            document.addEventListener('DOMContentLoaded', showMenu);


            function loadPizza(pizzaId) {
                document.getElementById('header').style.position = "static";

                fetch(`PHP/get_pizza_composition.php?id=${pizzaId}`)
                    .then(response => response.json())
                    .then(data => {
                        const popup = document.getElementById('composition');
                        const imgSrc = data.pizza.img || './css/img/pizza.png';

                        const selected = data.ingredients.filter(ing => ing.Quantity > 0);
                        const available = data.ingredients.filter(ing => ing.Quantity === 0);

                        updateFinalPrice.base = parseFloat(data.pizza.Price);
                        updateFinalPrice.ingredients = selected;

                        popup.innerHTML = `
                            <div class="p-6 m-12 w-lg bg-main-color rounded-3xl relative">
                                <button onclick="closePopup()" class="absolute top-4 right-4 text-2xl">&times;</button>

                                <h2 class="text-2xl font-bold mb-4 text-center">–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—ñ—Ü—É: ${data.pizza.NamePizza}</h2>

                                <div class="flex justify-center mb-4">
                                    <img src="${imgSrc}" alt="${data.pizza.NamePizza}" class="w-60 h-60 object-cover rounded-xl shadow">
                                </div>

                                <div class="mb-4 text-center text-xl">–ë–∞–∑–æ–≤–∞ —Ü—ñ–Ω–∞: <strong>${data.pizza.Price} ‚Ç¥</strong></div>

                                <div class="mb-4 text-center">
                                    <label class="mr-4 text-lg">–†–æ–∑–º—ñ—Ä:</label>
                                    <select id="pizzaSize" class="px-2 py-1 rounded border">
                                        <option value="null">–°–µ—Ä–µ–¥–Ω—è</option>
                                        <option value="0">–ú–∞–ª–∞ (-10%)</option>
                                        <option value="1">–í–µ–ª–∏–∫–∞ (+10%)</option>
                                    </select>
                                </div>

                                <h3 class="text-lg font-semibold mb-2">–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏:</h3>
                                <div class="grid grid-cols-2 gap-4 mb-4" id="ingredientsList">
                                    ${selected.map(ing => renderIngredientBlock(ing)).join('')}
                                </div>

                                <div class="mb-4">
                                    <label class="block text-lg mb-1">–î–æ–¥–∞—Ç–∏ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç:</label>
                                    <select id="addIngredientSelect" class="px-2 py-1 border rounded w-full mb-2">
                                        <option value="">-- –í–∏–±–µ—Ä—ñ—Ç—å —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç --</option>
                                        ${available.map(ing => `<option value="${ing.IDIngredient}">${ing.NameIngredient} (${ing.Price} ‚Ç¥ / ${ing.GramPerUnit} –≥)</option>`).join('')}
                                    </select>
                                    <button onclick="addIngredient()" class="bg-buton-color text-white px-4 py-1 rounded hover:bg-red-700 w-full">–î–æ–¥–∞—Ç–∏</button>
                                </div>

                                <div class="text-center font-bold text-xl mb-4">–¶—ñ–Ω–∞ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤: <span id="finalPrice">‚Ç¥</span></div>

                                <div class="flex justify-center gap-4">
                                    <button onclick="resetPizzaSettings()" class="bg-gray-300 text-black px-6 py-2 rounded hover:bg-gray-400">–°–∫–∏–Ω—É—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
                                    <button onclick="addToBasket()" class="bg-buton-color text-white px-6 py-2 rounded hover:bg-red-700">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                                </div>
                            </div>
                        `;

                        document.getElementById('pizzaSize').addEventListener('change', () => {
                        updateFinalPrice();
                    });

                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –≥–ª–æ–±–∞–ª—å–Ω–æ
                    window.lastAvailable = available;

                    updateFinalPrice();
                });
            }

            function renderIngredientBlock(ing) {
                return `
                    <div class="flex justify-between items-center border p-2 rounded" id="block-${ing.IDIngredient}">
                        <div>
                            <div class="font-semibold">${ing.NameIngredient}</div>
                            <div class="text-sm">${ing.Price} ‚Ç¥ / ${ing.GramPerUnit} –≥</div>
                        </div>

                        <div class="flex items-center gap-2">
                            <button onclick="updateQuantity(${ing.IDIngredient}, -1)">‚àí</button>
                            <span id="qty-${ing.IDIngredient}">${ing.Quantity}</span>
                            <button onclick="updateQuantity(${ing.IDIngredient}, 1)">+</button>
                            ${ing.isExtra ? `<button onclick="removeIngredient(${ing.IDIngredient})" class="text-red-500 ml-2">üóëÔ∏è</button>` : ""}
                        </div>
                    </div>
                `;
            }

            function addIngredient() {
                const select = document.getElementById('addIngredientSelect');
                const id = parseInt(select.value);
                if (!id || !window.lastAvailable) return;

                const ing = window.lastAvailable.find(i => i.IDIngredient === id);
                if (!ing) return;

                const addedCount = updateFinalPrice.ingredients.filter(i => i.isExtra).length;
                if (addedCount >= 5) {
                    alert("–ú–∞–∫—Å–∏–º—É–º 5 –Ω–æ–≤–∏—Ö —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤!");
                    return;
                }

                ing.Quantity = 1;
                ing.isExtra = true; 
                updateFinalPrice.ingredients.push(ing);

                const container = document.getElementById('ingredientsList');
                container.insertAdjacentHTML('beforeend', renderIngredientBlock(ing));
                updateFinalPrice();

                select.querySelector(`option[value="${id}"]`).remove();
                select.value = "";
            }

            function updateQuantity(id, delta) {
                const qtySpan = document.getElementById(`qty-${id}`);
                let qty = parseInt(qtySpan.innerText);
                qty = Math.max(0, Math.min(5, qty + delta));
                qtySpan.innerText = qty;
                updateFinalPrice();
            }

            function updateFinalPrice(base = null, ingredients = null) {
                if (base) updateFinalPrice.base = parseFloat(base);
                if (ingredients) updateFinalPrice.ingredients = ingredients;

                const size = document.getElementById('pizzaSize').value;
                let total = updateFinalPrice.base;

                updateFinalPrice.ingredients.forEach(ing => {
                    const currentQty = parseInt(document.getElementById(`qty-${ing.IDIngredient}`).innerText);
                    const defaultQty = parseInt(ing.Quantity); // –±–∞–∑–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑ composition

                    if (currentQty > defaultQty) {
                        const extra = currentQty - defaultQty;
                        total += extra * parseFloat(ing.Price);
                    }
                });

                if (size === "0") total *= 0.9;
                else if (size === "1") total *= 1.1;

                document.getElementById('finalPrice').innerText = total.toFixed(2) + ' ‚Ç¥';
            }

            function resetPizzaSettings() {
                const pizzaId = new URLSearchParams(window.location.search).get("id");
                const popup = document.getElementById("composition");

                if (!pizzaId && window.lastPizzaId) {
                    loadPizza(window.lastPizzaId);
                } else {
                    loadPizza(pizzaId);
                }
            }

            function removeIngredient(id) {
                const container = document.getElementById(`block-${id}`);
                if (container) container.remove();

                // –£–¥–∞–ª–∏—Ç—å –∏–∑ –º–∞—Å—Å–∏–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
                updateFinalPrice.ingredients = updateFinalPrice.ingredients.filter(ing => ing.IDIngredient !== id);

                // –í–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å–µ–ª–µ–∫—Ç
                const ing = window.lastAvailable.find(i => i.IDIngredient === id);
                if (ing) {
                    const select = document.getElementById("addIngredientSelect");
                    const option = document.createElement("option");
                    option.value = ing.IDIngredient;
                    option.textContent = `${ing.NameIngredient} (${ing.Price} ‚Ç¥ / ${ing.GramPerUnit} –≥)`;
                    select.appendChild(option);
                }

                updateFinalPrice();
            }

            function addToBasket() {
                const pizzaId = new URLSearchParams(window.location.search).get("id") || window.lastPizzaId;
                const size = document.getElementById('pizzaSize').value;
                const name = document.querySelector('#composition h2').innerText.replace('–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—ñ—Ü—É: ', '');
                const price = parseFloat(document.getElementById('finalPrice').innerText);
                
                const ingredients = updateFinalPrice.ingredients.map(ing => {
                    const qty = parseInt(document.getElementById(`qty-${ing.IDIngredient}`).innerText);
                    return {
                        IDIngredient: ing.IDIngredient,
                        NameIngredient: ing.NameIngredient,
                        Quantity: qty,
                        Price: ing.Price
                    };
                });

                const pizza = {
                    id: Date.now(),
                    name: name,
                    size: size,
                    price: price,
                    ingredients: ingredients
                };
            
                const basket = JSON.parse(localStorage.getItem('basket')) || [];
                basket.push(pizza);
                localStorage.setItem('basket', JSON.stringify(basket));

                renderBasket();
                closePopup();
            }

            function renderBasket() {
                const basket = JSON.parse(localStorage.getItem('basket')) || [];
                const list = document.querySelector('.sticky ul');
                const sumBlock = document.querySelector('.sticky .font-semibold');
                list.innerHTML = ''; // –û—á–∏—Å—Ç–∏–º –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–æ–º
                let total = 0;

                basket.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'mb-2 text-sm';
                    li.innerHTML = `
                        <div class="font-bold">${item.name} ${renderSizeLabel(item.size)}</div>
                        <div class="text-gray-700">–¶—ñ–Ω–∞: ${item.price.toFixed(2)} ‚Ç¥</div>
                    `;
                    list.appendChild(li);
                    total += item.price;
                });

                sumBlock.innerText = `–°—É–º–∞: ${total.toFixed(2)} ‚Ç¥`;
            }

            function renderSizeLabel(size) {
                if (size === "0") return "(–ú–∞–ª–∞)";
                if (size === "1") return "(–í–µ–ª–∏–∫–∞)";
                return "(–°–µ—Ä–µ–¥–Ω—è)";
            }

            window.addEventListener('DOMContentLoaded', () => {
                renderBasket();
            });

            document.querySelector('#clear-basket').addEventListener('click', () => {
                localStorage.removeItem('basket');
                renderBasket();
            });

            window.addEventListener('DOMContentLoaded', () => {
                const basket = JSON.parse(localStorage.getItem('basket')) || [];
                const list = document.querySelector('.sticky ul');
                const sumBlock = document.querySelector('.sticky .font-semibold');
                let total = 0;

                basket.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'mb-2';
                    li.innerHTML = `
                        <div class="font-bold">${item.name}</div>
                        <div class="text-sm">–¶—ñ–Ω–∞: ${item.price}</div>
                    `;
                    list.appendChild(li);

                    total += parseFloat(item.price);
                });

                sumBlock.innerText = `–°—É–º–∞: ${total.toFixed(2)} ‚Ç¥`;
            });

            function closePopup() {
                document.getElementById('header').style = "position: fixed;";
                document.getElementById('composition').classList.add('hidden');
            }

            function openPay() {
                document.getElementById('pay').classList.remove('hidden');
                loadIngredients();
            }

            function closePay() {
                document.getElementById('pay').classList.add('hidden');
            }

            document.getElementById('pay-button').addEventListener('click', function () {
                const form = document.createElement('form');
                form.method = 'post';
                form.action = 'https://secure.wayforpay.com/pay';
                form.acceptCharset = 'utf-8';

                // –í—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                form.innerHTML = `
                    <input name="merchantAccount" value="test_merch_n1">
                    <input name="merchantAuthType" value="SimpleSignature">
                    <input name="merchantDomainName" value="www.market.ua">
                    <input name="orderReference" value="DH1745217726">
                    <input name="orderDate" value="1415379863">
                    <input name="amount" value="1547.36">
                    <input name="currency" value="UAH">
                    <input name="orderTimeout" value="49000">
                    <input name="productName[]" value="–ü—Ä–æ—Ü–µ—Å–æ—Ä Intel Core i5-4670 3.4GHz">
                    <input name="productName[]" value="Kingston DDR3-1600 4096MB PC3-12800">
                    <input name="productPrice[]" value="1000">
                    <input name="productPrice[]" value="547.36">
                    <input name="productCount[]" value="1">
                    <input name="productCount[]" value="1">
                    <input name="clientFirstName" value="–í–∞—Å–∏–ª—å">
                    <input name="clientLastName" value="–ü—ñ–±–∞—Ä–µ–Ω–∫–æ">
                    <input name="clientAddress" value="–ø—Ä. –ù–∞—É–∫–∏, 12">
                    <input name="clientCity" value="–î–Ω—ñ–ø—Ä–æ">
                    <input name="clientEmail" value="some@mail.com">
                    <input name="defaultPaymentSystem" value="card">
                    <input name="merchantSignature" value="2d1c0fb24db14751dafff980c9c5258f">
                    <input type="submit" value="Test">
                `;
                
                document.body.appendChild(form);
                form.submit();
            });

            function pay(){

            }
        </script>

    </body>
</html>